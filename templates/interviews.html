{% extends "layout.html" %}
{% block content %}
    <h1>Interviews</h1>
    <br/>

    <form action="/filter">
        <p><label for="filter_input_applicant_code">Applicant Code:</label></p>
        <p><input onkeyup="myFunction1()" placeholder="Please, write your applicant code here" id="filter_input_applicant_code"
                  name="filter_input_applicant_code" type="text" size="50"/></p>

        <p><label for="filter_input_mentor">Mentor's Last Name:</label></p>
        <p><input onkeyup="myFunction2()" placeholder="Please, write your mentor's last name here!" id="filter_input_mentor"
                  name="filter_input_mentor" type="text" size="50"/></p>

        <p><label for="filter_input_school">School:</label></p>
        <p><input onkeyup="myFunction3()" placeholder="Please, write the city of your school here!" id="filter_input_school"
                  name="filter_input_school" type="text" size="50"/></p>

        <p><label for="filter_input_date">Interview Date:</label></p>
        <p><input onkeyup="myFunction4()" placeholder="Please, write the start time of the interview (Year-Month-Day)!" id="filter_input_date"
                  name="filter_input_date" type="text" size="50"/></p>
    </form>

    <table id="myTable" class="table table-bordered">
        <TR class="header">
            <TD><SPAN class="header">Applicant_code</SPAN></TD>
            <TD><SPAN class="header">Applicant First Name</SPAN></TD>
            <TD><SPAN class="header">Applicant Last Name</SPAN></TD>
            <TD><SPAN class="header">Interview Start Time</SPAN></TD>
            <TD><SPAN class="header">Interview End Time</SPAN></TD>
            <TD><SPAN class="header">School</SPAN></TD>
            <TD><SPAN class="header">Mentor Last Name</SPAN></TD>
            <TD><SPAN class="header">Status</SPAN></TD>

        </TR>
        {% for interview in interviews %}
            <TR>
                <TD>{{ interview.applicant_code.applicant_code }}</TD>
                <TD>{{ interview.applicant_code.first_name }}</TD>
                <TD>{{ interview.applicant_code.last_name }}</TD>
                <TD>{{ interview.slot_id.start_time }}</TD>
                <TD>{{ interview.slot_id.end_time }}</TD>
                <TD>{{ interview.applicant_code.applied_school.city }}</TD>
                <TD>{{ interview.slot_id.mentor.last_name }}</TD>
                <TD>{{ interview.applicant_code.status }}</TD>
            </TR>
        {% endfor %}
    </table>

    <script>
        function myFunction1() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("filter_input_applicant_code");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
    <script>
        function myFunction2() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("filter_input_mentor");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[6];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
    <script>
        function myFunction3() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("filter_input_school");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[5];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
    <script>
        function myFunction4() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("filter_input_date");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[3];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
    <a href="{{ url_for('show_admin_menu') }}">
            <button class="btn btn-primary" type="submit" id="back_to_admin_menu">Back to the Admin menu</button>
        </a>
{% endblock %}